// fixes a bunch of stuff with regards to the stock variant system

// add new variant themes that are missing
VARIANTTHEME
{
	name = ESA
	displayName = #autoLOC_6005083
	description = #autoLOC_6005084
	primaryColor = #ffffff
	secondaryColor = #124d7f
}
VARIANTTHEME
{
	name = TrussMount
	displayName = #autoLOC_8007113
	description = Who needs aerodynamics, anyways?
	primaryColor = #cccccc
	secondaryColor = #d96200
}

// fix wrong colors on some variant themes
//@VARIANTTHEME[GrayAndWhite]
//{
//	@primaryColor = #999999
//	@secondaryColor = #ffffff
//}
@VARIANTTHEME[YellowAndWhite]
{
	@primaryColor = #ffdd00
	@secondaryColor = #ffffff
}

// fix missing variant names so they work with the variant selector in the VAB
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[ESA]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{	
	@MODULE[ModulePartVariants]
	{	
		@VARIANT[ESA]
		{	
			%themeName = ESA
			//@primaryColor = #ffffff
			//@secondaryColor = #124d7f
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[TrussMount]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[TrussMount]
		{
			%themeName = TrussMount
			//@primaryColor = #cccccc
			//@secondaryColor = #d96200
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[White]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[White]
		{
			%themeName = White
			//@primaryColor = #ffffff
			//@secondaryColor = #ffffff
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[BlackAndWhite]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[BlackAndWhite]
		{
			%themeName = BlackAndWhite
			//@primaryColor = #000000
			//@secondaryColor = #ffffff
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[GrayAndOrange]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[GrayAndOrange]
		{
			%themeName = GrayAndOrange
			//@primaryColor = #4c4f47
			//@secondaryColor = #f49841
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Dark]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Dark]
		{
			%themeName = Dark
			//@primaryColor = #000000
			//@secondaryColor = #000000
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Gray]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{		
		@VARIANT[Gray]
		{
			%themeName = Gray
			//@primaryColor = #999999
			//@secondaryColor = #999999
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Orange]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Orange]
		{
			%themeName = Orange
			//@primaryColor = #f49841
			//@secondaryColor = #f49841
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Gold]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Gold]
		{
			%themeName = Gold
			//@primaryColor = #fccb0a
			//@secondaryColor = #fccb0a
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Bare]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Bare]
		{
			%themeName = Bare
			//@primaryColor = #cc0e0e
			//@secondaryColor = #000000
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Shroud]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Shroud]
		{
			%themeName = Shroud
			//@primaryColor = #ffffff
			//@secondaryColor = #999999
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[GrayAndWhite]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[GrayAndWhite]
		{
			%themeName = GrayAndWhite
			//@primaryColor = #999999
			//@secondaryColor = #ffffff
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[YellowAndWhite]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[YellowAndWhite]
		{
			%themeName = YellowAndWhite
			//@primaryColor = #fccb0a
			//@secondaryColor = #ffffff
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Silver]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Silver]
		{
			%themeName = Silver
			//@primaryColor = #ffffff
			//@secondaryColor = #ffffff
		}
	}
}
@PART:HAS[@MODULE[ModulePartVariants]:HAS[@VARIANT[Gray?with?Stripes]:HAS[~themeName[*]]]]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Gray?with?Stripes]
		{
			%themeName = Gray with Stripes
			//@primaryColor = #999999
			//@secondaryColor = #b08b39
		}
	}
}

// account for the mainsail/mastodon having specific variants
@PART[liquidEngineMainsail_v2|LiquidEngineKE-1]:HAS[@MODULE[ModulePartVariants]]:NEEDS[!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Full]
		{
			//@displayName = #autoLOC_8007114
			%themeName = Shroud
			//@primaryColor = #ffffff
			//@secondaryColor = #999999
		}
		@VARIANT[Mid]
		{
			//@displayName = #autoLOC_8007113
			%themeName = TrussMount
			//@primaryColor = #cccccc
			//@secondaryColor = #d96200
		}
		//@VARIANT[Bare]
		//{
		//	@primaryColor = #cc0e0e
		//	@secondaryColor = #000000
		//}
	}
}

// makinghistory parts have too many variants
@PART[LiquidEngineLV-T91]:HAS[@MODULE[ModulePartVariants]]:NEEDS[SquadExpansion/MakingHistory,!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Cap]
		{
			//@displayName = #autoLOC_8007114
			%themeName = Shroud
			//@primaryColor = #ffffff
			//@secondaryColor = #999999
		}
		//@VARIANT[Bare]
		//{
		//	@primaryColor = #cc0e0e
		//	@secondaryColor = #000000
		//}
	}
}
@PART[LiquidEngineRK-7]:HAS[@MODULE[ModulePartVariants]]:NEEDS[SquadExpansion/MakingHistory,!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[ShroudSmall]
		{
			%themeName = TrussMount
			//@primaryColor = #cccccc
			//@secondaryColor = #d96200
		}
		@VARIANT[ShroudBig]
		{
			%themeName = Shroud
		}
	}
}
@PART[LiquidEngineLV-TX87]:HAS[@MODULE[ModulePartVariants]]:NEEDS[SquadExpansion/MakingHistory,!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[TankButt]
		{
			//@displayName = #autoLOC_8007114
			%themeName = Shroud
			//@primaryColor = #ffffff
			//@secondaryColor = #999999
		}
	}
}
@PART[LiquidEngineRE-I2|LiquidEngineRE-J10]:HAS[@MODULE[ModulePartVariants]]:NEEDS[SquadExpansion/MakingHistory,!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[Shroud]
		{
			@displayName = #autoLOC_8007114		// change from 'Shrouded' to 'Shroud'
			%themeName = Shroud
			//@primaryColor = #ffffff
			//@secondaryColor = #999999
		}
		//@VARIANT[Bare]
		//{
		//	@primaryColor = #cc0e0e
		//	@secondaryColor = #000000
		//}
	}
}

// make variants consistent (all rockomax tanks are technically 'black and white' anyways)
@PART[Rockomax8BW|Rockomax32_BW|Rockomax64_BW|Size3SmallTank|Size3MediumTank|Size3LargeTank]:HAS[@MODULE[ModulePartVariants]]:NEEDS[!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[BlackAndWhite]
		{
			%themeName = BlackAndWhite
		}
	}
}

// fix wrong colors. like why squad, it even has yellow in the name!
@PART[fuelLine|Decoupler_*|Separator_*]:HAS[@MODULE[ModulePartVariants]]:NEEDS[!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@VARIANT[YellowAndWhite]
		{
			@primaryColor = #ffdd00
			@secondaryColor = #ffffff
		}
	}
}
@PART[Size1p5_Monoprop]:HAS[@MODULE[ModulePartVariants]]:NEEDS[SquadExpansion/MakingHistory,!Restock]:LAST[MunksFixes]
{
	@MODULE[ModulePartVariants]
	{
		@primaryColor = #ffdd00
		@secondaryColor = #ffffff
	}
}
