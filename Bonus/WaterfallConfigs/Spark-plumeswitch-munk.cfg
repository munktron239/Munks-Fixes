// Spark: Kerolox sustainer engine
// Issues: missing random controllers: random, Random2, Random3, Random4, Random5
@PART[liquidEngineMini_v2]:NEEDS[B9PartSwitch,StockWaterfallEffects,Restock]:LAST[Waterfall]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = plumeSwitch
		switcherDescription = Plume
		switcherDescriptionPlural = Plumes
		affectDragCubes = false
		affectFARVoxels = false
		switchInFlight = true
		SUBTYPE
		{ 
			name = default
			title = Kerolox
			primaryColor = ResourceColorOxidizer
			secondaryColor = ResourceColorLiquidFuel
			descriptionSummary = #LOC_MunksFixes_waterfall_keroloxDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_defaultKerolox
		}
		SUBTYPE
		{
			name = hypergolicSpark
			title = Hypergolic
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = Blush
			descriptionSummary = #LOC_MunksFixes_waterfall_hypergolDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_plumeHypergolSpark
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
				}
				DATA
				{
					CONTROLLER
					{
						name = atmosphereDepth
						linkedTo = atmosphere_density
					}
					CONTROLLER
					{
						name = throttle
						linkedTo = throttle
					}
					CONTROLLER
					{
						name = random
						linkedTo = random
						range = -1,1
					}
					TEMPLATE
					{
						name = plume
						templateName = stock-aerozine50-upper-1
						overrideParentTransform = thrustTransform
						position = 0,0,-0.03
						rotation = 0, 0, 0
						scale = 0.11, 0.11, 0.11
					}
					TEMPLATE
					{
						name = core
						templateName = stock-hypergolic-core
						overrideParentTransform = thrustTransform
						position = 0,0,-0.01
						rotation = 0, 0, 0
						scale = 0.14, 0.14, 0.14
					}
					TEMPLATE
					{
						name = exhaust
						templateName = stock-kerolox-generator
						overrideParentTransform = fxTransformTurbo
						position = 0,0,0
						rotation = 90, 0, 0
						scale = 0.2, 0.2, 0.2
					}
				}
			}
		}
	}
}

@PART[liquidEngineMini_v2]:NEEDS[B9PartSwitch,StockWaterfallEffects,!Restock]:LAST[Waterfall]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = plumeSwitch
		switcherDescription = Plume
		switcherDescriptionPlural = Plumes
		affectDragCubes = false
		affectFARVoxels = false
		switchInFlight = true
		SUBTYPE
		{ 
			name = default
			title = Kerolox
			primaryColor = ResourceColorOxidizer
			secondaryColor = ResourceColorLiquidFuel
			descriptionSummary = #LOC_MunksFixes_waterfall_keroloxDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_defaultKerolox
		}
		SUBTYPE
		{
			name = hypergolicSpark
			title = Hypergolic
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = Blush
			descriptionSummary = #LOC_MunksFixes_waterfall_hypergolDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_plumeHypergolSpark
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
				}
				DATA
				{
					CONTROLLER
					{
						name = atmosphereDepth
						linkedTo = atmosphere_density
					}
					CONTROLLER
					{
						name = throttle
						linkedTo = throttle
					}
					CONTROLLER
					{
						name = random
						linkedTo = random
						range = -1,1
					}
					TEMPLATE
					{
						name = plume
						templateName = stock-aerozine50-upper-1
						overrideParentTransform = thrustTransform
						position = 0,0,-0.065
						rotation = 0, 0, 0
						scale = 0.15, 0.15, 0.15
					}
					TEMPLATE
					{
						name = core
						templateName = stock-hypergolic-core
						overrideParentTransform = thrustTransform
						position = 0,0,-0.036
						rotation = 0, 0, 0
						scale = 0.1855, 0.1855, 0.165
					}
					TEMPLATE
					{
						name = exhaust
						templateName = stock-kerolox-generator
						overrideParentTransform = thrustTransform
						position = 0.164,0,-0.126
						rotation = 0, 14, 0
						scale = 0.13, 0.13, 0.13
					}
				}
			}
		}
	}
}