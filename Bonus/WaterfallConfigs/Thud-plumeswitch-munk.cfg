// Thud: Kerolox vernier engine
// Issues: missing random controllers: R1
// Issues: missing controllers: mach
@PART[radialLiquidEngine1-2]:NEEDS[StockWaterfallEffects,Restock]:LAST[Waterfall]
{
	MODULE
	{
		name = ModuleWaterfallFX
		// This is a custom name
		moduleID = thudTurboFX
		// This links the effects to a given ModuleEngines
		engineID = basicEngine

		// List out all controllers we want available
		// This controller scales with atmosphere depth
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		// This controller scales with effective throttle
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
		// this controller generates a random value in the range specified
		CONTROLLER
		{
			name = random
			linkedTo = random
			range = -1,1
		}
		// -----------------------------------------------------
		// Past here should be generated with the ingame editor!
		// -----------------------------------------------------
		TEMPLATE
		{
			// This is the name of the template to use
			name = exhaust
			templateName = stock-kerolox-generator
			// This field allows you to override the parentTransform name in the EFFECTS contained in the template
			overrideParentTransform = thrustTransform
			position = 0.26,0,-0.075
			rotation = 0, 20, 0
			scale = 0.27, 0.27, 0.135
		}
	}
	MODULE:NEEDS[B9PartSwitch]
	{
		name = ModuleB9PartSwitch
		moduleID = plumeSwitch
		switcherDescription = Plume
		switcherDescriptionPlural = Plumes
		affectDragCubes = false
		affectFARVoxels = false
		switchInFlight = true
		SUBTYPE
		{ 
			name = default
			title = Hypergolic
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = Blush
			descriptionSummary = #LOC_MunksFixes_waterfall_hypergolDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_defaultHypergol
		}
		SUBTYPE
		{
			name = keroloxThud
			title = Kerolox
			primaryColor = ResourceColorOxidizer
			secondaryColor = ResourceColorLiquidFuel
			descriptionSummary = #LOC_MunksFixes_waterfall_keroloxDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_plumeKeroloxThud
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
					moduleID = thudEngine
				}
				DATA
				{
					CONTROLLER
					{
						name = atmosphereDepth
						linkedTo = atmosphere_density
					}
					CONTROLLER
					{
						name = throttle
						linkedTo = throttle
					}
					CONTROLLER
					{
						name = random
						linkedTo = random
						range = -1,1
					}
					TEMPLATE
					{
						name = plume
						templateName = stock-kerolox-vernier
						overrideParentTransform = thrustTransform
						position = 0,0,0.135
						rotation = 0, 0, 0
						scale = 1.7, 1.7, 1.7
					}
					TEMPLATE
					{
						name = core
						templateName = stock-kerolox-core
						overrideParentTransform = thrustTransform
						position = 0,0,0.077
						rotation = 0, 0, 0
						scale = 0.75, 0.75, 0.6125
					}
				}
			}
		}
	}
}

@PART[radialLiquidEngine1-2]:NEEDS[B9PartSwitch,StockWaterfallEffects,!Restock]:LAST[Waterfall]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = plumeSwitch
		switcherDescription = Plume
		switcherDescriptionPlural = Plumes
		affectDragCubes = false
		affectFARVoxels = false
		switchInFlight = true
		SUBTYPE
		{ 
			name = default
			title = Hypergolic
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = Blush
			descriptionSummary = #LOC_MunksFixes_waterfall_hypergolDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_defaultHypergol
		}
		SUBTYPE
		{
			name = keroloxThud
			title = Kerolox
			primaryColor = ResourceColorOxidizer
			secondaryColor = ResourceColorLiquidFuel
			descriptionSummary = #LOC_MunksFixes_waterfall_keroloxDesc
			descriptionDetail = #LOC_MunksFixes_waterfall_plumeKeroloxThud
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleWaterfallFX
				}
				DATA
				{
					CONTROLLER
					{
						name = atmosphereDepth
						linkedTo = atmosphere_density
					}
					CONTROLLER
					{
						name = throttle
						linkedTo = throttle
					}
					CONTROLLER
					{
						name = random
						linkedTo = random
						range = -1,1
					}
					TEMPLATE
					{
						name = plume
						templateName = stock-kerolox-vernier
						overrideParentTransform = thrustTransform
						position = 0,0,0.135
						rotation = 0, 0, 0
						scale = 1.7, 1.7, 1.7
					}
					TEMPLATE
					{
						name = core
						templateName = stock-kerolox-core
						overrideParentTransform = thrustTransform
						position = 0,0.0016,0.077
						rotation = 0, 0, 0
						scale = 0.75, 0.75, 0.6125
					}
				}
			}
		}
	}
}